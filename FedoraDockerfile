FROM fedora:latest

WORKDIR /app

# Update fedora
RUN dnf update -y

# Install all sfml compilation libraries
RUN dnf install -y          \
    g++                     \
    git                     \
    tree                    \
    cmake                   \
    mesa-libGL-devel        \
    mesa-libGLU-devel       \
    openal-soft-devel       \
    libgudev-devel          \
    flac-devel              \
    libvorbis-devel         \
    freetype-devel          \
    libX11-devel            \
    libXcursor-devel        \
    libXrandr-devel

# Copy all necessaries dependencies
COPY ./CMakeLists.txt .
COPY ./cmake/ ./cmake/
COPY ./server/ ./server/
COPY ./client/ ./client/
COPY ./build_scripts/build_fedora_binary.sh .
COPY ./build_scripts/launch_client.sh .
COPY ./build_scripts/launch_server.sh .

# Run build script
RUN ./build_fedora_binary.sh
